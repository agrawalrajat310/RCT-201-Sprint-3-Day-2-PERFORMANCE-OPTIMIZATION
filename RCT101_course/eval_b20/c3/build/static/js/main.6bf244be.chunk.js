(this["webpackJsonpc2-evaluation-problem"]=this["webpackJsonpc2-evaluation-problem"]||[]).push([[0],{32:function(t,e,n){},34:function(t,e,n){"use strict";n.r(e);var c=n(0),a=n(23),s=n.n(a),i=(n(32),n(3)),r=n(15),o=n(5),d=n(2),j=Object(c.createContext)(),l={isAuth:!1,token:null};var b=function(t){var e=t.children,n=Object(c.useState)(l),a=Object(o.a)(n,2),s=a[0],i=a[1];return Object(d.jsx)(j.Provider,{value:{authState:s,loginUser:function(t){i(Object(r.a)(Object(r.a)({},s),{},{isAuth:!0,token:t}))},logoutUser:function(){i(l)}},children:e})};var u=function(t){var e=t.children;return Object(c.useContext)(j).authState.isAuth?e:Object(d.jsx)(i.a,{to:"/login"})},h=n(4),O=n(7);var p=function(){return Object(d.jsx)("h3",{"data-testid":"loading-container",children:"...Loading"})};var x=function(t){var e=t.totalPage,n=t.current,c=t.onChange,a=Object(d.jsx)("button",{disabled:1===n,onClick:function(){return c(n-1)},"data-testid":"prev-page",children:"PREV"}),s=Object(d.jsx)("button",{"data-testid":"current-page",children:n}),i=Object(d.jsx)("button",{disabled:n===e,onClick:function(){return c(n+1)},"data-testid":"next-page",children:"NEXT"}),r=Object(d.jsxs)("div",{children:["Total Pages: ",Object(d.jsx)("b",{"data-testid":"total-pages",children:e})," "]});return Object(d.jsxs)("div",{"data-testid":"pagination-container",children:[a,s,i,r]})},g=function(t){var e=t.title,n=t.price,c=t.image,a=t.category;return Object(d.jsxs)("div",{"data-testid":"product-item",style:{display:"flex",gap:"1rem",justifyContent:"space-between",alignItems:"center",border:"1px solid #ccc",padding:"1rem",marginBottom:"1rem",flexDirection:"column"},children:[Object(d.jsx)("img",{src:c,alt:"title","data-testid":"product-image",height:"100px"}),Object(d.jsx)("b",{"data-testid":"product-title",children:e}),Object(d.jsxs)("span",{"data-testid":"product-price",children:["\u20b9 ",n]}),Object(d.jsx)("div",{style:{display:"flex"},children:Object(d.jsx)("b",{"data-testid":"product-category",children:a})})]})},m=function(t){var e=t.products,n=void 0===e?[]:e;return Object(d.jsx)("div",{"data-testid":"products-container",children:n.map((function(t){return Object(d.jsx)(g,{title:t.title,image:t.image,price:t.price,category:t.category},t.id)}))})};var v=function(){var t=Object(c.useContext)(j),e=t.logoutUser,n=t.authState,a=Object(c.useState)(!0),s=Object(o.a)(a,2),i=s[0],r=s[1],l=Object(c.useState)(1),b=Object(o.a)(l,2),u=b[0],g=b[1],v=Object(c.useState)([]),f=Object(o.a)(v,2),k=f[0],y=f[1],w=Object(c.useState)(null),C=Object(o.a)(w,2),S=C[0],P=C[1],T=Object(c.useState)("asc"),N=Object(o.a)(T,2),A=N[0],B=N[1];Object(c.useEffect)((function(){L(u,A)}),[u,A]);var L=function(){var t=Object(O.a)(Object(h.a)().mark((function t(e,n){var c,a,s;return Object(h.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c="https://dbioz2ek0e.execute-api.ap-south-1.amazonaws.com/mockapi/get-products?page=".concat(e,"&limit=10&orderBy=").concat(n),r(!0),t.prev=2,t.next=5,fetch(c);case 5:return a=t.sent,t.next=8,a.json();case 8:s=t.sent,y(s.data),P(s.totalPages),r(!1),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(2),r(!1),console.log(t.t0.message);case 18:case"end":return t.stop()}}),t,null,[[2,14]])})));return function(e,n){return t.apply(this,arguments)}}(),U=function(){B("asc"===A?"desc":"asc")};return Object(d.jsxs)("div",{children:[Object(d.jsx)("h3",{children:"Dashboard"}),Object(d.jsxs)("div",{children:[Object(d.jsx)("button",{onClick:e,"data-testid":"logout-btn",children:"Logout"}),Object(d.jsxs)("p",{children:["Token:",Object(d.jsx)("b",{"data-testid":"user-token",children:n.token})]})]}),Object(d.jsx)("br",{}),Object(d.jsxs)("div",{"data-testid":"sort-container",children:[Object(d.jsx)("button",{disabled:"asc"===A,onClick:U,"data-testid":"low-to-high",children:"Sort low to high"}),Object(d.jsx)("button",{disabled:"desc"===A,onClick:U,"data-testid":"high-to-low",children:"Sort high to low"})]}),Object(d.jsx)("br",{}),Object(d.jsx)("br",{}),Object(d.jsx)(x,{totalPage:S,current:u,onChange:function(t){return g(t)}}),Object(d.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:i?Object(d.jsx)(p,{}):Object(d.jsx)(m,{products:k})})]})},f=n(9);var k=function(){return Object(d.jsxs)("div",{className:"home",children:[Object(d.jsx)(f.b,{to:"/login",children:Object(d.jsx)("h3",{"data-testid":"login-link",children:"Login Page"})}),Object(d.jsx)(f.b,{to:"/dashboard",children:Object(d.jsx)("h3",{"data-testid":"home-link",children:"Home"})})]})},y=n(6),w={email:"",password:""};var C=function(){var t=Object(c.useState)(w),e=Object(o.a)(t,2),n=e[0],a=e[1],s=Object(c.useContext)(j),l=s.authState,b=s.loginUser,u=Object(c.useState)(!1),p=Object(o.a)(u,2),x=p[0],g=p[1],m=function(t){var e=t.target,c=e.name,s=e.value;a(Object(r.a)(Object(r.a)({},n),{},Object(y.a)({},c,s)))},v=function(){var t=Object(O.a)(Object(h.a)().mark((function t(e){var c,a;return Object(h.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g(!0),e.preventDefault(),"https://reqres.in/api/login",t.prev=3,t.next=6,fetch("https://reqres.in/api/login",{method:"POST",headers:{"Content-Type":"Application/json"},body:JSON.stringify({email:n.email,password:n.password})});case 6:return c=t.sent,t.next=9,c.json();case 9:a=t.sent,b(a.token),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(3),console.log(t.t0.message);case 16:case"end":return t.stop()}}),t,null,[[3,13]])})));return function(e){return t.apply(this,arguments)}}();return l.isAuth?Object(d.jsx)(i.a,{to:"/dashboard"}):Object(d.jsxs)("div",{className:"login-page",children:[Object(d.jsxs)("form",{onSubmit:v,className:"form","data-testid":"login-form",children:[Object(d.jsx)("div",{children:Object(d.jsx)("label",{children:Object(d.jsx)("input",{name:"email",value:n.email,onChange:m,"data-testid":"email-input",type:"email",placeholder:"email"})})}),Object(d.jsx)("div",{children:Object(d.jsx)("label",{children:Object(d.jsx)("input",{name:"password",value:n.password,onChange:m,"data-testid":"password-input",type:"password",placeholder:"password"})})}),Object(d.jsx)("div",{children:Object(d.jsx)("button",{disabled:x,"data-testid":"form-submit",type:"submit",children:"SUBMIT"})})]}),Object(d.jsx)("div",{children:Object(d.jsx)(f.b,{className:"message",to:"/",children:"Go Back"})})]})};var S=function(){return Object(d.jsx)("div",{children:Object(d.jsxs)(i.d,{children:[Object(d.jsx)(i.b,{path:"/",element:Object(d.jsx)(k,{})}),Object(d.jsx)(i.b,{path:"/login",element:Object(d.jsx)(C,{})}),Object(d.jsx)(i.b,{path:"/dashboard",element:Object(d.jsx)(u,{children:Object(d.jsx)(v,{})})})]})})};function P(){return Object(d.jsx)("div",{className:"App",children:Object(d.jsx)(S,{})})}var T=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,35)).then((function(e){var n=e.getCLS,c=e.getFID,a=e.getFCP,s=e.getLCP,i=e.getTTFB;n(t),c(t),a(t),s(t),i(t)}))};s.a.createRoot(document.getElementById("root")).render(Object(d.jsx)(b,{children:Object(d.jsx)(f.a,{children:Object(d.jsx)(P,{})})})),T()}},[[34,1,2]]]);
//# sourceMappingURL=main.6bf244be.chunk.js.map